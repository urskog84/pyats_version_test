

ncs5k_standby_not_ready:
  preface: |
    Tue Jul 24 23:08:31.150 UTC 

  prompt: "Standby card not present or not Ready for failover. Proceed? [confirm]"
  commands:
    "":
      response: |2

        Preparing system for backup. This may take a few minutes especially for large configurations.
            Status report: node0_RP0_CPU0: START TO BACKUP 
            Status report: node0_RP0_CPU0: BACKUP HAS COMPLETED SUCCESSFULLY 
        [Done]


      new_state: ncs5k_reload_proceed

ncs5k_reload_proceed:
  prompt: "Proceed with reload?  [confirm]"
  commands:
    "":
      response: |
        Reloading node  0/RP0/CPU0
         
        RL: Reboot initiated with code 1, cause User initiated graceful reload reboot_timeout 30 shutdown delay 0
        RL: Shutdown initiated
        Query the node to be reloaded 
         NODE_IP of noded to be reloaded 192.0.0.4
        sending stop hb
        Cause: User initiated graceful reload
        VM IP addr sent for reload 192.0.0.4


        Received ack from sdrmgr for reload request.Returncode:0
        successful disconnection from service 
        wd_disconnect_cb 529 CMP-WD disconnected successfully
        Invmgr successful disconnection from service
        RP/0/RP0/CPU0:fretta#
        Disconnecting from 'default-sdr--1' console. Continue(Y/N)?


        Connecting to 'default-sdr--1' console
        Configuring network interfaces... done.
        Starting system message bus: dbus.
        Starting OpenBSD Secure Shell server: sshd
        sshd start/running, process 1726
        Starting rpcbind daemon...done.
        Starting random number generator daemonUnable to open file: /dev/tpm0
        .
        Starting system log daemon...0
        tftpd-hpa disabled in /etc/default/tftpd-hpa
        Starting internet superserver: xinetd.
        Starting Lighttpd Web Server: lighttpd.
        Libvirt not initialized for container instance
        Starting crond: OK
        SIOCADDRT: File exists

        DBG_MSG: platform type is 0




        This product contains cryptographic features and is subject to United 
        States and local country laws governing import, export, transfer and 
        use. Delivery of Cisco cryptographic products does not imply third-party 
        authority to import, export, distribute or use encryption. Importers, 
        exporters, distributors and users are responsible for compliance with 
        U.S. and local country laws. By using this product you agree to comply 
        with applicable laws and regulations. If you are unable to comply with 
        U.S. and local laws, return this product immediately. 

        A summary of U.S. laws governing Cisco cryptographic products may be 
        found at:
        http://www.cisco.com/wwl/export/crypto/tool/stqrg.html

        If you require further assistance please contact us by sending email to 
        export@cisco.com.





        ios con0/RP0/CPU0 is now available





        Press RETURN to get started.        
    

      new_state: ncs5k__press_return
      timing:
        - 0:,0,0.005
    

ncs5k__press_return:
  commands:
    "":
      response: |

        SYSTEM CONFIGURATION IN PROCESS


        The startup configuration for this device is presently loading.
        This may take a few minutes. You will be notified upon completion.

        Please do not attempt to reconfigure the device until this process is complete.

        User Access Verification

      new_state: ncs5k_login
      timing:
        - 0:,0,0.02
    

ncs5k_login:
  prompt: "Username: "
  commands:
    "lab":
      new_state: ncs5k_pw

ncs5k_pw:
  prompt: "Password: "
  commands:
    "lab":
      response: |
        SYSTEM CONFIGURATION COMPLETED
      new_state: ncs5k_enable

ncs5k_enable:
  prompt: RP/0/RP0/CPU0:%N#
  commands:
    "terminal length 0": ""
    "terminal width 0": ""
    "reload":
      new_state: ncs5k_standby_not_ready
    "configure terminal":
      new_state: ncs5k_config
    "show terminal": |
      Thu Jul 26 15:14:37.556 UTC
      Line "con0_RP0_CPU0", Location "0/RP0/CPU0", Type "Console"
      Length: 24 lines, Width: 80 columns
      Baud rate (TX/RX) is 115200, "No" Parity, 2 stopbits, 8 databits
      Template: console
      Capabilities: Timestamp Enabled
      Allowed transports are none.

ncs5k_enable_vty:
  prompt: RP/0/RP0/CPU0:%N#
  commands:
    "terminal length 0": ""
    "terminal width 0": ""
    "reload":
      new_state: ncs5k_standby_not_ready
    "configure terminal":
      new_state: ncs5k_config_vty
    "show terminal": |
      Sun Jul 29 19:24:40.070 UTC
      Line "vty0", Location "10.24.92.234", Type "VTY"
      Length: 0 lines, Width: 0 columns
      Baud rate (TX/RX) is 0, "Empty" Parity, 0 stopbits, 0 databits
      Template: default
      Capabilities: Timestamp Enabled
      Allowed transports are telnet ssh.

ncs5k_config:
  prompt: "RP/0/RP0/CPU0:%N(config)#"
  commands: &config_cmds
    "end":
      new_state: ncs5k_enable
    "no logging console": ""
    "line console": ""
    "exec-timeout 0 0": ""
    "clock timezone UTC 0 0": ""
    "commit": ""
    "absolute-timeout 0": ""
    "exec-timeout 0 0": ""
    "absolute-timeout 0": ""
    "session-timeout 0": ""
    "line default": ""


ncs5k_config_vty:
  prompt: "RP/0/RP0/CPU0:%N(config)#"
  commands:
    <<: *config_cmds
    "end":
      new_state: ncs5k_enable_vty
